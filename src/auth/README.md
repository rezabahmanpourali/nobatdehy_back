# مستندات API های احراز هویت

## فهرست API ها

### 1. ارسال کد تایید
- **آدرس**: `/auth/customers/otp/`
- **متد**: `POST`
- **پارامترها**: 
  - `phone`: شماره موبایل کاربر (مثال: 09123456789)
- **توضیحات**: با این API می‌توانید برای شماره موبایل کاربر، کد تایید ارسال کنید.
- **محدودیت‌ها**:
  - حداکثر 3 بار تلاش در هر بازه زمانی
  - حداقل 1 دقیقه فاصله بین درخواست‌ها
  - کد تایید بعد از 2 دقیقه منقضی می‌شود

### 2. تایید کد و ورود
- **آدرس**: `/auth/customers/verify/`
- **متد**: `POST`
- **پارامترها**:
  - `phone`: شماره موبایل کاربر
  - `otp`: کد تایید دریافتی
- **توضیحات**: با این API می‌توانید کد تایید را وارد کرده و وارد حساب کاربری شوید.
- **خروجی**: توکن‌های دسترسی و تجدید به همراه اطلاعات کاربر

### 3. تجدید توکن
- **آدرس**: `/auth/customers/refresh/`
- **متد**: `POST`
- **هدر مورد نیاز**: `Authorization: Bearer {refresh_token}`
- **توضیحات**: با استفاده از توکن تجدید، یک توکن دسترسی جدید دریافت کنید.
- **خروجی**: توکن دسترسی جدید

### 4. دریافت اطلاعات کاربر
- **آدرس**: `/auth/customers/me/`
- **متد**: `GET`
- **هدر مورد نیاز**: `Authorization: Bearer {access_token}`
- **توضیحات**: دریافت اطلاعات کاربر فعلی و آدرس‌های ثبت شده
- **خروجی**: اطلاعات کامل پروفایل کاربر و لیست آدرس‌ها

### 5. ویرایش اطلاعات کاربر
- **آدرس**: `/auth/customers/edit/`
- **متد**: `PUT`
- **هدر مورد نیاز**: `Authorization: Bearer {access_token}`
- **پارامترها** (همه اختیاری):
  - `name`: نام
  - `lastn`: نام خانوادگی
  - `face_form`: فرم صورت
  - `hair_form`: فرم مو
  - `ryecolor`: رنگ چشم
  - `like_hair`: مدل موی مورد علاقه
  - `password`: رمز عبور جدید
- **توضیحات**: ویرایش اطلاعات پروفایل کاربر

### 6. حذف حساب کاربری
- **آدرس**: `/auth/customers/delete/`
- **متد**: `DELETE`
- **هدر مورد نیاز**: `Authorization: Bearer {access_token}`
- **توضیحات**: حذف کامل حساب کاربری و تمام اطلاعات مرتبط

### 7. افزودن آدرس جدید
- **آدرس**: `/auth/customers/addresses/`
- **متد**: `POST`
- **هدر مورد نیاز**: `Authorization: Bearer {access_token}`
- **پارامترها**:
  - `latitude`: عرض جغرافیایی
  - `longitude`: طول جغرافیایی
- **توضیحات**: افزودن آدرس جدید برای کاربر

### 8. دریافت لیست آدرس‌ها
- **آدرس**: `/auth/customers/addresses/`
- **متد**: `GET`
- **هدر مورد نیاز**: `Authorization: Bearer {access_token}`
- **توضیحات**: دریافت لیست تمام آدرس‌های ثبت شده کاربر

### 9. خروج از حساب کاربری
- **آدرس**: `/auth/customers/logout`
- **متد**: `POST`
- **هدر مورد نیاز**: `Authorization: Bearer {refresh_token}`
- **توضیحات**: خروج از حساب کاربری و غیرفعال کردن توکن‌ها

## نکات مهم
1. تمام توکن‌های دسترسی بعد از 30 دقیقه منقضی می‌شوند
2. توکن‌های تجدید بعد از 7 روز منقضی می‌شوند
3. برای درخواست‌های نیازمند احراز هویت، حتماً توکن دسترسی معتبر در هدر `Authorization` ارسال شود
4. در صورت منقضی شدن توکن دسترسی، با استفاده از توکن تجدید، توکن جدید دریافت کنید
5. شماره موبایل باید با فرمت صحیح (شروع با 09 و دقیقاً 11 رقم) ارسال شود 